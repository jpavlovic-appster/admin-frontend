<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <app-breadcrumb title="Admin" [breadcrumbs]="breadcrumbs"></app-breadcrumb>
  <!-- /.content-header -->
  <form [formGroup]="adminForm" (ngSubmit)="onSubmit()">
    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <!-- left column -->
          <div class="col-md-12">
            <!-- general form elements -->
            <div class="card card-primary">
              <div class="card-header">
                <h3 class="card-title">{{ title }} {{ 'ADMIN' | translate}}</h3>
              </div>
              <!-- /.card-header -->
              <!-- form start -->

              <div class="card-body">
                <div class="row">
                  <div class="col-md-3" *ngIf="adminId>0">
                    <div class="form-group">
                      <label for="email"> {{ 'EMAIL' | translate}} <span class="text-danger">*</span>
                      </label>
                      <input type="text" formControlName="email" class="form-control" id="email" [readOnly]="true"
                        placeholder="{{'PLACEHOLDERS.ENTER_EMAIL' | translate}}" />
                      <div class="invalid-feedback" *ngIf="submitted && f.email.errors">
                        <div *ngIf="f.email.errors.required">
                          {{'VALIDATION_MSGS.EMAIL.REQUIRED' | translate}}
                        </div>
                        <div *ngIf="f.email.errors.pattern">
                          {{'VALIDATION_MSGS.EMAIL.VALID' | translate}}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3" *ngIf="adminId==0">
                    <div class="form-group">
                      <label for="email"> {{ 'EMAIL' | translate}} <span class="text-danger">*</span>
                      </label>
                      <input type="text" formControlName="email" class="form-control" id="email"
                        placeholder="{{'PLACEHOLDERS.ENTER_EMAIL' | translate}}" />
                      <div class="invalid-feedback" *ngIf="submitted && f.email.errors">
                        <div *ngIf="f.email.errors.required">
                          {{'VALIDATION_MSGS.EMAIL.REQUIRED' | translate}}
                        </div>
                        <div *ngIf="f.email.errors.pattern">
                          {{'VALIDATION_MSGS.EMAIL.VALID' | translate}}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3" *ngIf="!passChange && adminId>0">
                    <div class="form-group">
                      <button type="button" class="btn btn-warning mgt" (click)="changePassword(1)">
                        Change Password
                      </button>
                    </div>
                  </div>
                  <div class="col-md-3" *ngIf="passChange || adminId==0">
                    <div class="form-group">
                      <label for="password"> {{'PASSWORD' | translate}}
                        <span class="text-danger">*</span></label>
                      <input type="password" formControlName="password" class="form-control" maxlength="30"
                        id="password" placeholder="{{'PLACEHOLDERS.ENTER_PASSWORD' | translate}}" />
                      <div class="invalid-feedback" *ngIf="submitted && f.password.errors">
                        <div *ngIf="f.password.errors.required">
                          {{'VALIDATION_MSGS.PASSWORD.REQUIRED' | translate}}
                        </div>
                        <div *ngIf="f.password.errors.pattern">
                          {{'VALIDATION_MSGS.PASSWORD.VALID' | translate}}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3"  *ngIf="passChange || adminId==0">
                    <div class="form-group">
                      <label for="password">{{'CONFIRM_PASSWORD' | translate}}
                        <span class="text-danger">*</span></label>
                      <input type="password" formControlName="confirm_password" class="form-control" maxlength="30"
                        id="password" placeholder="{{'PLACEHOLDERS.ENTER_PASSWORD_AGAIN' | translate}}" />
                      <div class="invalid-feedback" *ngIf="submitted && f.confirm_password.errors">
                        <div *ngIf="f.confirm_password.errors.required">
                          Confirm Password is required
                        </div>
                        <div *ngIf="f.confirm_password.errors.mustMatch">
                          Password does not match
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3" *ngIf="passChange && adminId>0">
                    <div class="form-group">
                      <button type="button" class="fa fa-arrow-left mgt" (click)="changePassword(0)"> {{ 'ACTION_BUTTON.BACK' | translate}}
                      </button>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="fname">{{ 'FIRST_NAME' | translate}} <span class="text-danger">*</span></label>
                      <input type="text" formControlName="first_name" class="form-control" id="fname" maxlength="50"
                        placeholder="{{'PLACEHOLDERS.ENTER_FIRST_NAME' | translate}}" />
                      <div class="invalid-feedback" *ngIf="submitted && f.first_name.errors">
                        <div *ngIf="f.first_name.errors.required">
                          {{'VALIDATION_MSGS.FIRST_NAME.REQUIRED' | translate}}
                        </div>
                        <div *ngIf="
                            !f.first_name.errors.pattern &&
                            f.first_name.errors.minlength
                          ">
                          First name must be greater than 3 characters
                        </div>
                        <div *ngIf="f.first_name.errors.pattern">
                          First name must be valid
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="last_name">{{ 'LAST_NAME' | translate}}  <span class="text-danger">*</span></label>
                      <input type="text" formControlName="last_name" class="form-control" id="last_name"
                        placeholder="{{'PLACEHOLDERS.ENTER_LAST_NAME' | translate}}" />
                      <div class="invalid-feedback" *ngIf="submitted && f.last_name.errors">
                        <div *ngIf="f.last_name.errors.required">
                          {{'VALIDATION_MSGS.LAST_NAME.REQUIRED' | translate}}
                        </div>
                        <div *ngIf="
                            !f.last_name.errors.pattern &&
                            f.last_name.errors.minlength
                          ">
                          Last name must be greater than 3 characters
                        </div>
                        <div *ngIf="f.last_name.errors.pattern">
                          Last name must be valid
                        </div>
                      </div>
                    </div>
                  </div>
                  
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="name">{{'ADMIN_CODE' | translate}} <span class="text-danger">*</span></label>
                      <input type="text" formControlName="agent_name" class="form-control" id="name" maxlength="50"
                        placeholder="Enter Code" />
                      <div class="invalid-feedback" *ngIf="submitted && f.agent_name.errors">
                        <div *ngIf="f.agent_name.errors.required">
                          {{'VALIDATION_MSGS.ADMIN_CODE.REQUIRED' | translate}}
                        </div>
                        <div *ngIf="
                            !f.agent_name.errors.pattern &&
                            f.agent_name.errors.minlength
                          ">
                          Admin code must be greater than 3 characters
                        </div>
                        <div *ngIf="f.agent_name.errors.pattern">
                          Admin code must be valid
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="phone">{{ 'PHONE_NUMBER' | translate }} <span class="text-danger">*</span></label>
                      <input type="text" formControlName="phone" class="form-control" maxlength="15" id="phone"
                        placeholder="Enter Phone" />
                      <div class="invalid-feedback" *ngIf="submitted && f.phone.errors">
                        <div *ngIf="f.phone.errors.required">
                          {{'VALIDATION_MSGS.PHONE_NUMBER.REQUIRED' | translate}}
                        </div>
                        <div *ngIf="
                            !f.phone.errors.pattern && f.phone.errors.minlength
                          ">
                          Phone must have less than {{ phoneMinLen }} digits
                        </div>
                        <div *ngIf="f.phone.errors.pattern">
                          Phone must be valid
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- <div *ngIf="adminId > 0" class="icheck-primary d-inline">
                  <input
                    type="checkbox"
                    formControlName="active"
                    id="checkboxPrimary1"
                  />
                  <label for="checkboxPrimary1"> Active </label>
                </div> -->
              </div>

              <div class="card-footer">
                <button type="submit" [disabled]="adminLoader" class="btn btn-primary">
                  <span *ngIf="adminLoader" class="spinner-border spinner-border-sm" role="status"
                    aria-hidden="true"></span>
                    {{'ACTION_BUTTON.SUBMIT' | translate}}
                </button>
                &nbsp;
                <a
                  class="btn btn-warning"
                  [routerLink]="
                    authService.adminTypeValue === adminType.Super
                      ? ['/super-admin/subscribers/details', subscriberId]
                      : ['/agents/subscriber',subscriberId,adminId]
                  "
                >
                {{'ACTION_BUTTON.CANCEL' | translate}}
                </a>
              </div>

              <!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container-fluid -->
    </section>
  </form>
</div>